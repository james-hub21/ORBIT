  function getFacilityName(id: any) {
    if (!id) return 'Unknown Facility';
    return facilities?.find(f => f.id === id)?.name || String(id);
  }

  function abbreviateFacilityName(name: string): string {
    if (!name) return name;
    const abbrevMap: Record<string, string> = {
      'Collaborative Learning Room 1': 'CLR 1',
      'Collaborative Learning Room 2': 'CLR 2',
      'Faculty Lounge': 'Faculty Lounge',
      'Board Room': 'Board Room',
    };
    return abbrevMap[name] || (name.length > 20 ? name.substring(0, 17) + '...' : name);
  }

  function formatDateTime(value: any) {
    if (!value) return '';
    try {
      return new Date(value).toLocaleString();
    } catch (_e) {
      return String(value);
    }
  }
